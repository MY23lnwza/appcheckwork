<!-- ‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏ô <script> ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á -->
<script>
    const dummyTasks = [];
    let currentUser = "";

    const userCredentials = {
        "admin": "1234",
        "luklnwza": "1234"
    };

    document.addEventListener('DOMContentLoaded', () => {
        // ‡∏Å‡∏î Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠ Login
        document.getElementById('loginPassword').addEventListener('keydown', function (e) {
            if (e.key === 'Enter') {
                login();
            }
        });
    });

    function login() {
        const username = document.getElementById('loginUsername').value.trim().toLowerCase();
        const password = document.getElementById('loginPassword').value;

        if (!username || userCredentials[username] !== password) {
            alert('‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
            return;
        }

        currentUser = username;
        document.getElementById('loginPage').classList.add('hidden');
        document.getElementById('logoutBtn').classList.remove('hidden');

        if (username === 'admin') {
            document.getElementById('adminPage').classList.remove('hidden');
            renderAdminTasks();
        } else {
            document.getElementById('userPage').classList.remove('hidden');
            renderUserTasks();
        }
    }

    function logout() {
        currentUser = "";
        document.getElementById('logoutBtn').classList.add('hidden');

        // ‡∏ã‡πà‡∏≠‡∏ô‡∏ó‡∏∏‡∏Å‡∏´‡∏ô‡πâ‡∏≤
        ['adminPage', 'userPage', 'addTaskPage'].forEach(id => {
            document.getElementById(id).classList.add('hidden');
        });

        // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤ Login
        document.getElementById('loginPage').classList.remove('hidden');
        document.getElementById('loginUsername').value = '';
        document.getElementById('loginPassword').value = '';
    }

    function showAddTaskForm() {
        document.getElementById('adminPage').classList.add('hidden');
        document.getElementById('addTaskPage').classList.remove('hidden');
    }

    function backToAdmin() {
        document.getElementById('addTaskPage').classList.add('hidden');
        document.getElementById('adminPage').classList.remove('hidden');
        renderAdminTasks();
    }

    function addTask() {
        const title = document.getElementById('taskTitle').value;
        const assignTo = document.getElementById('taskAssignTo').value;
        const due = document.getElementById('taskDue').value;
        const brief = document.getElementById('taskBrief').value;

        if (!title || !assignTo || !due) {
            alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö');
            return;
        }

        const newTask = { title, assignTo, due, brief, status: 'assigned' };
        dummyTasks.push(newTask);

        // üìå ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏õ Google Sheet (‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ú‡πà‡∏≤‡∏ô Apps Script Web App)
        fetch("https://script.google.com/macros/s/<<YOUR_SCRIPT_ID>>/exec", {
            method: "POST",
            mode: "no-cors",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(newTask)
        });

        alert('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
        document.getElementById('taskTitle').value = '';
        document.getElementById('taskAssignTo').value = '';
        document.getElementById('taskDue').value = '';
        document.getElementById('taskBrief').value = '';

        backToAdmin();
    }

    function renderAdminTasks() {
        const container = document.getElementById('adminTasks');
        container.innerHTML = '';
        dummyTasks.forEach((t, i) => {
            container.innerHTML += `
                <div class="task-card">
                    <h3>${t.title}</h3>
                    <p>‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏´‡πâ: ${t.assignTo} | ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡πà‡∏á: ${t.due}</p>
                    <p>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: <span class="status-${t.status}">${t.status}</span></p>
                </div>
            `;
        });
    }

    function renderUserTasks() {
        const todo = document.getElementById('userTasks');
        const submitted = document.getElementById('userSubmitted');
        todo.innerHTML = '';
        submitted.innerHTML = '';

        dummyTasks.forEach(t => {
            if (t.assignTo.toLowerCase() === currentUser.toLowerCase()) {
                const card = `
                    <div class="task-card">
                        <h3>${t.title}</h3>
                        <p>‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡πà‡∏á: ${t.due}</p>
                        <p>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: <span class="status-${t.status}">${t.status}</span></p>
                        ${t.status === 'assigned' ? `<button onclick="submitWork('${t.title}')">‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô</button>` : ''}
                    </div>
                `;
                if (t.status === 'assigned') {
                    todo.innerHTML += card;
                } else {
                    submitted.innerHTML += card;
                }
            }
        });
    }

    function submitWork(title) {
        dummyTasks.forEach(t => {
            if (t.title === title && t.assignTo.toLowerCase() === currentUser.toLowerCase()) {
                t.status = 'submitted';
            }
        });
        renderUserTasks();
    }
</script>
