<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ระบบจัดการงาน</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter&display=swap');

        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background-color: #2b2d31;
            color: #f2f3f5;
        }

        .container {
            max-width: 800px;
            margin: 50px auto;
            background-color: #313338;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
        }

        h1, h2, h3 {
            color: #f2f3f5;
            border-bottom: 1px solid #424549;
            padding-bottom: 5px;
        }

        input, select, textarea, button {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            border-radius: 4px;
            border: none;
            box-sizing: border-box;
            font-family: inherit;
        }

        input, select, textarea {
            background-color: #232428;
            color: #f2f3f5;
        }

        button {
            background-color: #5865f2;
            color: white;
            cursor: pointer;
        }

        button:hover {
            background-color: #4752c4;
        }

        .hidden {
            display: none;
        }

        .task-card {
            background-color: #232428;
            padding: 15px;
            margin-top: 15px;
            border-radius: 5px;
        }

        .status-approved { color: #23a55a; }
        .status-edit { color: #f0b232; }
        .status-assigned, .status-submitted { color: #faa81a; }
    </style>
</head>
<body>

<div class="container" id="loginPage">
    <h1>เข้าสู่ระบบ</h1>
    <input type="text" id="loginUsername" placeholder="ชื่อผู้ใช้">
    <input type="password" id="loginPassword" placeholder="รหัสผ่าน">
    <button onclick="login()">เข้าสู่ระบบ</button>
</div>

<div class="container hidden" id="adminPage">
    <h1>แผงควบคุม Admin</h1>
    <button onclick="showAddTaskForm()">➕ เพิ่มงานใหม่</button>
    <h2>งานทั้งหมด</h2>
    <div id="adminTasks"></div>
</div>

<div class="container hidden" id="addTaskPage">
    <h1>เพิ่มงานใหม่</h1>
    <input type="text" id="taskTitle" placeholder="ชื่องาน">
    <input type="text" id="taskAssignTo" placeholder="มอบหมายให้ (ชื่อผู้ใช้)">
    <input type="date" id="taskDue">
    <textarea id="taskBrief" placeholder="รายละเอียด/บรีฟ"></textarea>
    <button onclick="addTask()">บันทึกงาน</button>
    <button onclick="backToAdmin()">ย้อนกลับ</button>
</div>

<div class="container hidden" id="userPage">
    <h1>งานของฉัน</h1>
    <h2>งานที่ต้องทำ</h2>
    <div id="userTasks"></div>
    <h2>งานที่ส่งแล้ว</h2>
    <div id="userSubmitted"></div>
</div>

<script>
    const dummyTasks = [];
    let currentUser = "";

    const userCredentials = {
        "admin": "adminpass",
        "user1": "1234",
        "user2": "5678"
    };

    function login() {
        const username = document.getElementById('loginUsername').value.trim();
        const password = document.getElementById('loginPassword').value;

        if (!username || userCredentials[username] !== password) {
            alert('ชื่อผู้ใช้หรือรหัสผ่านไม่ถูกต้อง');
            return;
        }

        currentUser = username;

        if (username.toLowerCase() === 'admin') {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('adminPage').classList.remove('hidden');
            renderAdminTasks();
        } else {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('userPage').classList.remove('hidden');
            renderUserTasks();
        }
    }

    function showAddTaskForm() {
        document.getElementById('adminPage').classList.add('hidden');
        document.getElementById('addTaskPage').classList.remove('hidden');
    }

    function backToAdmin() {
        document.getElementById('addTaskPage').classList.add('hidden');
        document.getElementById('adminPage').classList.remove('hidden');
        renderAdminTasks();
    }

    function addTask() {
        const title = document.getElementById('taskTitle').value;
        const assignTo = document.getElementById('taskAssignTo').value;
        const due = document.getElementById('taskDue').value;
        const brief = document.getElementById('taskBrief').value;

        if (!title || !assignTo || !due) {
            alert('กรุณากรอกข้อมูลให้ครบ');
            return;
        }

        dummyTasks.push({ title, assignTo, due, brief, status: 'assigned' });
        alert('เพิ่มงานสำเร็จ');

        document.getElementById('taskTitle').value = '';
        document.getElementById('taskAssignTo').value = '';
        document.getElementById('taskDue').value = '';
        document.getElementById('taskBrief').value = '';

        backToAdmin();
    }

    function renderAdminTasks() {
        const container = document.getElementById('adminTasks');
        container.innerHTML = '';
        dummyTasks.forEach((t, i) => {
            container.innerHTML += `
                <div class="task-card">
                    <h3>${t.title}</h3>
                    <p>มอบหมายให้: ${t.assignTo} | กำหนดส่ง: ${t.due}</p>
                    <p>สถานะ: <span class="status-${t.status}">${t.status}</span></p>
                </div>
            `;
        });
    }

    function renderUserTasks() {
        const todo = document.getElementById('userTasks');
        const submitted = document.getElementById('userSubmitted');
        todo.innerHTML = '';
        submitted.innerHTML = '';

        dummyTasks.forEach(t => {
            if (t.assignTo.toLowerCase() === currentUser.toLowerCase()) {
                const card = `
                    <div class="task-card">
                        <h3>${t.title}</h3>
                        <p>กำหนดส่ง: ${t.due}</p>
                        <p>สถานะ: <span class="status-${t.status}">${t.status}</span></p>
                        ${t.status === 'assigned' ? `<button onclick="submitWork('${t.title}')">ส่งงาน</button>` : ''}
                    </div>
                `;
                if (t.status === 'assigned') {
                    todo.innerHTML += card;
                } else {
                    submitted.innerHTML += card;
                }
            }
        });
    }

    function submitWork(title) {
        dummyTasks.forEach(t => {
            if (t.title === title && t.assignTo.toLowerCase() === currentUser.toLowerCase()) {
                t.status = 'submitted';
            }
        });
        renderUserTasks();
    }
</script>

</body>
</html>
