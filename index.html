<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter&display=swap');

        body {
            margin: 0;
            font-family: 'Inter', sans-serif;
            background-color: #2b2d31;
            color: #f2f3f5;
        }

        .container {
            max-width: 800px;
            margin: 50px auto;
            background-color: #313338;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
        }

        h1, h2, h3 {
            color: #f2f3f5;
            border-bottom: 1px solid #424549;
            padding-bottom: 5px;
        }

        input, select, textarea, button {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            border-radius: 4px;
            border: none;
            box-sizing: border-box;
            font-family: inherit;
        }

        input, select, textarea {
            background-color: #232428;
            color: #f2f3f5;
        }

        button {
            background-color: #5865f2;
            color: white;
            cursor: pointer;
        }

        button:hover {
            background-color: #4752c4;
        }

        .hidden {
            display: none;
        }

        .task-card {
            background-color: #232428;
            padding: 15px;
            margin-top: 15px;
            border-radius: 5px;
        }

        .status-approved { color: #23a55a; }
        .status-edit { color: #f0b232; }
        .status-assigned, .status-submitted { color: #faa81a; }

        #logoutBtn {
            background-color: #f04747;
            float: right;
            width: auto;
            padding: 8px 15px;
            margin-bottom: 15px;
        }
    </style>
</head>
<body>

<div class="container" id="loginPage">
    <h1>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h1>
    <input type="text" id="loginUsername" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ">
    <input type="password" id="loginPassword" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
    <button onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
</div>

<div class="container hidden" id="adminPage">
    <button id="logoutBtn" class="hidden" onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
    <h1>‡πÅ‡∏ú‡∏á‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏° Admin</h1>
    <button onclick="showAddTaskForm()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</button>
    <h2>‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h2>
    <div id="adminTasks"></div>
</div>

<div class="container hidden" id="addTaskPage">
    <h1>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà</h1>
    <input type="text" id="taskTitle" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏á‡∏≤‡∏ô">
    <input type="text" id="taskAssignTo" placeholder="‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏´‡πâ (‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ)">
    <input type="date" id="taskDue">
    <textarea id="taskBrief" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î/‡∏ö‡∏£‡∏µ‡∏ü"></textarea>
    <button onclick="addTask()">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏á‡∏≤‡∏ô</button>
    <button onclick="backToAdmin()">‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
</div>

<div class="container hidden" id="userPage">
    <button id="logoutBtn" class="hidden" onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</button>
    <h1>‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h1>
    <h2>‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥</h2>
    <div id="userTasks"></div>
    <h2>‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏™‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß</h2>
    <div id="userSubmitted"></div>
</div>

<script>
    const dummyTasks = [];
    let currentUser = "";

    const userCredentials = {
        "admin": "1234",
        "luklnwza": "1234"
    };

    document.addEventListener('DOMContentLoaded', () => {
        // Enter ‡πÄ‡∏û‡∏∑‡πà‡∏≠ Login
        document.getElementById('loginPassword').addEventListener('keydown', function (e) {
            if (e.key === 'Enter') {
                login();
            }
        });
    });

    function login() {
        const username = document.getElementById('loginUsername').value.trim().toLowerCase();
        const password = document.getElementById('loginPassword').value;

        if (!username || userCredentials[username] !== password) {
            alert('‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á');
            return;
        }

        currentUser = username;
        document.getElementById('loginPage').classList.add('hidden');
        document.querySelectorAll('#logoutBtn').forEach(btn => btn.classList.remove('hidden'));

        if (username === 'admin') {
            document.getElementById('adminPage').classList.remove('hidden');
            renderAdminTasks();
        } else {
            document.getElementById('userPage').classList.remove('hidden');
            renderUserTasks();
        }
    }

    function logout() {
        currentUser = "";
        document.querySelectorAll('#logoutBtn').forEach(btn => btn.classList.add('hidden'));

        ['adminPage', 'userPage', 'addTaskPage'].forEach(id => {
            document.getElementById(id).classList.add('hidden');
        });

        document.getElementById('loginPage').classList.remove('hidden');
        document.getElementById('loginUsername').value = '';
        document.getElementById('loginPassword').value = '';
    }

    function showAddTaskForm() {
        document.getElementById('adminPage').classList.add('hidden');
        document.getElementById('addTaskPage').classList.remove('hidden');
    }

    function backToAdmin() {
        document.getElementById('addTaskPage').classList.add('hidden');
        document.getElementById('adminPage').classList.remove('hidden');
        renderAdminTasks();
    }

    function addTask() {
        const title = document.getElementById('taskTitle').value;
        const assignTo = document.getElementById('taskAssignTo').value;
        const due = document.getElementById('taskDue').value;
        const brief = document.getElementById('taskBrief').value;

        if (!title || !assignTo || !due) {
            alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö');
            return;
        }

        const newTask = { title, assignTo, due, brief, status: 'assigned' };
        dummyTasks.push(newTask);

        // üëá ‡πÉ‡∏™‡πà Web App URL ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà
        fetch("https://script.google.com/macros/s/AKfycbwNYhPrxqiy3JI9Vaj2Bs7kcpvuJh7F_EOAIZtPV0BcrAj2NdrsZtq0LB9lPj5Mo5i1Ng/exec", {
            method: "POST",
            mode: "no-cors",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(newTask)
        });

        alert('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');

        document.getElementById('taskTitle').value = '';
        document.getElementById('taskAssignTo').value = '';
        document.getElementById('taskDue').value = '';
        document.getElementById('taskBrief').value = '';

        backToAdmin();
    }

    function renderAdminTasks() {
        const container = document.getElementById('adminTasks');
        container.innerHTML = '';
        dummyTasks.forEach(t => {
            container.innerHTML += `
                <div class="task-card">
                    <h3>${t.title}</h3>
                    <p>‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢‡πÉ‡∏´‡πâ: ${t.assignTo} | ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡πà‡∏á: ${t.due}</p>
                    <p>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: <span class="status-${t.status}">${t.status}</span></p>
                </div>
            `;
        });
    }

    function renderUserTasks() {
        const todo = document.getElementById('userTasks');
        const submitted = document.getElementById('userSubmitted');
        todo.innerHTML = '';
        submitted.innerHTML = '';

        dummyTasks.forEach(t => {
            if (t.assignTo.toLowerCase() === currentUser.toLowerCase()) {
                const card = `
                    <div class="task-card">
                        <h3>${t.title}</h3>
                        <p>‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏™‡πà‡∏á: ${t.due}</p>
                        <p>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞: <span class="status-${t.status}">${t.status}</span></p>
                        ${t.status === 'assigned' ? `<button onclick="submitWork('${t.title}')">‡∏™‡πà‡∏á‡∏á‡∏≤‡∏ô</button>` : ''}
                    </div>
                `;
                if (t.status === 'assigned') {
                    todo.innerHTML += card;
                } else {
                    submitted.innerHTML += card;
                }
            }
        });
    }

    function submitWork(title) {
        dummyTasks.forEach(t => {
            if (t.title === title && t.assignTo.toLowerCase() === currentUser.toLowerCase()) {
                t.status = 'submitted';
            }
        });
        renderUserTasks();
    }
</script>

</body>
</html>
